# Sample Talos configuration file

# The title of the report
title: mobile

#*** output options ****
#uncomment to turn on dump to csv option
#csv_dir: 'output'
#comment out next two lines to disable send to graph server
results_server: 'graphs-stage.mozilla.org'
results_link: '/server/collect.cgi'
develop: True

# browser info
process : fennec
browser_path: /tests/fennec
browser_log: browser_output.txt
# arguments to pass to browser
extra_args: ''
#how long the browser takes to open/close
browser_wait: 20
test_timeout: 3600
bcontroller_config: bcontroller.yml

branch: mobile

remote: False
video_capture: False
capture_dir:
deviceip:
deviceport: 20701
webserver: localhost
deviceroot:

buildid: testbuildid

init_url: getInfo.html

# Preferences to set in the test (use "preferences : {}" for no prefs)
preferences :
  browser.EULA.override : true
  security.fileuri.strict_origin_policy : false
  browser.shell.checkDefaultBrowser : false
  browser.warnOnQuit : false
  browser.link.open_newwindow : 2
  dom.allow_scripts_to_close_windows : true
  dom.disable_open_during_load: false
  dom.max_script_run_time : 0
  browser.dom.window.dump.enabled: true
  dom.disable_window_flip : true
  dom.disable_window_move_resize : true
  security.enable_java : false
  extensions.checkCompatibility : false
  extensions.update.notifyUser: false
  talos.logfile: browser_output.txt
  browser.cache.disk.smart_size.enabled: false
  browser.cache.disk.smart_size.firstrun: false

# Extensions to install in test (use "extensions: {}" for none)
# Need quotes around guid because of curly braces
# extensions :
#     "{12345678-1234-1234-1234-abcd12345678}" : c:\path\to\unzipped\xpi
#     foo@sample.com : c:\path\to\other\unzipped\xpi
extensions : {}

#any directories whose contents need to be installed in the browser before running the tests
# this assumes that the directories themselves already exist in the firefox path
dirs:
  chrome : page_load_test/chrome
  components : page_load_test/components

# Environment variables to set during test (use env: {} for none)
env :
  NO_EM_RESTART : 1
  MOZ_CRASHREPORTER_NO_REPORT : 1
  MOZ_CRASHREPORTER_SHUTDOWN : 1
# Tests to run
#  url         : (REQUIRED) url to load into the given firefox browser
#  url_mod     : (OPTIONAL) a bit of code to be evaled and added to the given url during each cycle of the test
#  resolution  : (REQUIRED) how long (in seconds) to pause between counter sampling
#  cycles      : (REQUIRED) how many times to run the test
#  timeout     : (OPTIONAL) how many seconds the test can run before we consider it failed and quit (default 8 hours)
#  pagetimeout : (OPTIONAL) how many seconds each page is allowed to take before considered to be frozen (default 8 hours)
#            Must be used in conjuction with the pageloader with the -tpnoisy option
#  counters    : (REQUIRED) types of system activity to monitor during test run, can be empty
#            For possible values of counters argument on Windows, see
#            http://technet2.microsoft.com/WindowsServer/en/Library/86b5d116-6fb3-427b-af8c-9077162125fe1033.mspx?mfr=true
#            Possible values on Mac:
#            counters : ['Private Bytes', 'RSS']
#            Possible values on Linux:
#            counters : ['Private Bytes', 'RSS', 'XRes']
#            Standard windows values:
#            counters : ['Working Set', 'Private Bytes', '% Processor Time']

# to set up a new test it must have the correct configuration options and drop information in a standard format
# the format is seen in the regular expressions in ttest.py
# to see how the data passed from the browser is processed see send_to_graph and send_to_csv in run_tests.py
tests :
- name: tcolorcycle
  url: startup_test/videocapture/colorcycle.html
  resolution: 1
  cycles : 1
  timeout : 300
  win_counters: []
  linux_counters : []
  mac_counters : []
  shutdown : False
  profile_path: mobile_profile
- name: tpageload
  url :  '-tp page_load_test/v.manifest -tpchrome -tpnoisy -tpmozafterpaint -tpformat tinderbox -tpcycles 1 -tpeideticker -tpdelay 1000'
  resolution : 20
  cycles : 1
  pagetimeout : 700
  win_counters : []
  linux_counters : []
  mac_counters : []
  timeout : 14400
  shutdown : True
  profile_path: mobile_profile
